bot = dofile('utils.lua')json = dofile('json.lua')sudos = dofile('sudo.lua')URL = require "socket.url"serpent = require("serpent")http = require "socket.http"https = require "ssl.https"redis = require('redis')db = redis.connect('127.0.0.1', 6379)  bot_id=0  function vardump(value) print(serpent.block(value, {comment=false})) end  function dl_cb(arg, data)  end  function is_sudo(msg)  local var = false  for v,user in pairs(sudo) do  if user == msg.sender_user_id_ or db:sismember('mods'..bot_id,msg.sender_user_id_) then var = true end  end  return var  end   function run(msg,data)   function lkj(arg, data) _G.bot_id=data.id_ end tdcli_function ({ID = "GetMe",}, lkj, nil)   if db:get("autobcs"..bot_id)=='on' and db:get("timera"..bot_id)==nil and db:scard('autoposterm'..bot_id) > 0 then db:setex("timera"..bot_id,db:get("autobctime"..bot_id),true)   local list2 = db:smembers('autoposterm'..bot_id)   function cb(a,b,c)   if b.ID == "Message" then   local list = db:smembers('bc'..bot_id)    for k,v in pairs(list) do   bot.forwardMessages(v,b.chat_id_, {[0] = b.id_}, 0)   end    end   end   local ms = nil   for k, v in pairs(list2) do   ms = db:get('gp'..v..bot_id)   tdcli_function({ID = "GetMessage",chat_id_ = ms,message_id_ = v}, cb, {id8 = v})   end   end   function rejoin()   function joinlinkss(a,b,c)   if b.ID=='Error' then   if b.code_ ~= 429 then db:srem('links'..bot_id,a.lnk) db:sadd('elinks'..bot_id,a.lnk) end   else db:srem('links'..bot_id,a.lnk) db:sadd('elinks'..bot_id,a.lnk)   end   end   local list = db:smembers('links'..bot_id)   for k,v in pairs(list) do tdcli_function ({ID = "ImportChatInviteLink",invite_link_ = v}, joinlinkss, {lnk = v}) end   end   if tostring(msg.chat_id_):match('-') then    if tostring(db:get('seen'..bot_id)) == "gp" or tostring(db:get('seen'..bot_id)) == "all" then   bot.viewMessages(msg.chat_id_, {[0] = msg.id_})  end   if not db:sismember('bc'..bot_id,msg.chat_id_) then db:sadd('bc'..bot_id,msg.chat_id_) end    elseif not tostring(msg.chat_id_):match('-') then   if db:get('autom'..bot_id)=='on' then    if msg.content_.text_:match("Ø³Ù„Ø§Ù…") then   bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ø³Ù„Ø§Ù…','md')   elseif msg.content_.text_:match("Ø®ÙˆØ¨ÛŒ") then    bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù…Ø±Ø³ÛŒ ØªÙˆ Ø®ÙˆØ¨ÛŒØŸ','md')   end   end  if tostring(db:get('seen'..bot_id)) == "pv" or tostring(db:get('seen'..bot_id)) == "all" then   bot.viewMessages(msg.chat_id_, {[0] = msg.id_})  end   if db:sismember('users'..bot_id,msg.chat_id_) then    function lkj(a,b,c)   if b.ID ~='Error' then   db:sadd('users'..bot_id,msg.chat_id_)    end    end    tdcli_function ({ID = "GetUser",user_id_ =msg.chat_id_}, lkj,nil)   end    end   local text = nil   if msg.content_.text_ and msg.content_.entities_ and msg.content_.entities_[0] and msg.content_.entities_[0].ID == 'MessageEntityUrl' then   text = msg.content_.text_ or msg.content_.text_   elseif is_sudo(msg) then   text = msg.content_.text_   end   if text then    function aj_check() if db:get('aj1'..bot_id)==nil then db:set('aj1'..bot_id,'on') return true elseif db:get('aj1'..bot_id)=="on" then return true elseif db:get('aj1'..bot_id)=="off" then return false end   end   function check_link(extra, result, success)   function joinlinks(a,b,c)   if b.ID=='Error' then if b.code_ ~= 429 then db:srem('links'..bot_id,a.lnk) db:sadd('elinks'..bot_id,a.lnk) end   else db:srem('links'..bot_id,a.lnk) db:sadd('elinks'..bot_id,a.lnk)   end   end   if tostring(result.is_supergroup_channel_)=='true' and not db:sismember('links'..bot_id,extra.link) and not db:sismember('elinks'..bot_id,extra.link) then   db:sadd('links'..bot_id,extra.link)    if aj_check() then tdcli_function ({ID = "ImportChatInviteLink",invite_link_ =extra.link}, joinlinks, {lnk = extra.link}) end end   end   function process_links(text_) local matches = {}   if text_ and text_:match("https://telegram.me/joinchat/%S+") then matches = {text_:match("(https://t.me/joinchat/%S+)") or text_:match("(https://telegram.me/joinchat/%S+)")}   tdcli_function({ID = "CheckChatInviteLink",invite_link_ = matches[1]}, check_link, {link = matches[1]})   elseif text_ and text_:match("https://t.me/joinchat/%S+") then    matches = {string.gsub(text_:match("(https://t.me/joinchat/%S+)"), "t.me", "telegram.me")}   tdcli_function ({ID = "CheckChatInviteLink",invite_link_ = matches[1]}, check_link, {link = matches[1]})   end   end   function process_stats(msg)   if msg.content_.ID == "MessageChatDeleteMember" and msg.content_.id_ == bot_id then db:srem('bc'..bot_id,msg.chat_id_) end    if db:get('timer'..bot_id) == nil then local mn = math.random(480,1080) db:setex('timer'..bot_id, tonumber(mn), true) rejoin() end   end  function is_com(text)  local comm = {'panel','help','aj','off','on','rem','bc','check','promote','demote','set','add','sinchi','re','info','seen'}  local var = false  for v,user in pairs(comm) do  if string.find(text,tostring(user)) then var =true end  end  return var  end   process_stats(msg) process_links(text)   if is_sudo(msg) and is_com(text) then   if text == 'help' then    local mytxt =" Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø³ÛŒÙ†Ú†ÛŒ\n ğŸ—“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª\n ğŸ”¹ panel\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸŒªØ§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø´Ø®Øµ Ø¨Ù‡ ØªÙ…Ø§Ù…ÛŒ Ú¯Ø±ÙˆÙ‡Ø§\nğŸ”¹addall [reply | username]\nÙ¾ÛŒØ§Ù… Ø´Ø®Øµ Ø±Ø§ Ø±ÛŒÙ¾Ù„Ø§ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø¨Ù‡ ØªÙ†Ù‡Ø§ÛŒÛŒ Ø¨Ø²Ù†ÛŒØ¯ ÛŒØ§\nØ§ÛŒØ¯ÛŒ Ø´Ø®Øµ Ø±Ø§ Ø¬Ù„Ùˆ Ø¯Ø³ØªÙˆØ± Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯\nÙ…Ø«Ø§Ù„:\naddall @sinaxhpm \nâ–â–â–â–â–â–â–â–â–â–â–\n ğŸŒØªØºÛŒÛŒØ± Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ \n ğŸ”¹setphoto link \n Ø¨Ù‡ Ø¬Ø§ÛŒ Ù„ÛŒÙ†Ú© Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø±Ø§ Ø¨Ø²Ø§Ø±ÛŒØ¯ \nâ–â–â–â–â–â–â–â–â–â–â–\n ğŸ‘â€ğŸ—¨ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒÙ†\nğŸ”¹seen gp\nØªÙ†Ù‡Ø§ Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø®ÙˆØ±Ø¯\nğŸ”¹seen pv\nÙÙ‚Ø· Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ ØªÙˆÛŒ Ù¾ÛŒÙˆÛŒ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø®ÙˆØ±Ø¯\nğŸ”¹seen all\nØªÙ…Ø§Ù…ÛŒ Ù¾ÛŒØ§Ù… Ù‡Ø§ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø®ÙˆØ±Ø¯\nğŸ”¹seen off\nÙ‡ÛŒÚ† Ù¾ÛŒØ§Ù…ÛŒ Ø³ÛŒÙ† Ù†Ø®ÙˆØ§Ù‡Ø¯ Ø®ÙˆØ±Ø¯\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”ƒ Ø­Ø°Ù ØªÙ…Ø§Ù…ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§\n ğŸ”¹ remgp\n â–â–â–â–â–â–â–â–â–â–â–\n â˜¢ï¸ Ú†Ú© Ú©Ø±Ø¯Ù† Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³\n ğŸ”¹gpcheck\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ“£ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ù‡Ù…Ù‡ ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§(Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ)\n ğŸ”¹bc\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”Š Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ ØªÙ…Ø§Ù…ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø±Ú¯Ø¨Ø§Ø±ÛŒ Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø¹Ø¯Ø¯\n Ø§Ù†ØªØ®Ø§Ø¨ÛŒ\n ğŸ”¹nbc [nubmer]\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”‚ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡\n ğŸ”¹rejoin\n â–â–â–â–â–â–â–â–â–â–â–\n âš ï¸ Ø­Ø°Ù ØªÙ…Ø§Ù…ÛŒ Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡(Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡)\n ğŸ”¹remlinks\n â–â–â–â–â–â–â–â–â–â–â–\n â™¦ï¸Ø­Ø°Ù Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡\n ğŸ”¹remelinks\n ğŸ“›ØªÙˆØ¬Ù‡ Ø¯Ø§Ø´ØªÛŒØ¯ Ø¨Ø§Ø´ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± ÛŒÚ© e Ø§Ø¶Ø§ÙÛŒ Ù‡Ø³Øª - Ø¨Ø§ Ø¯Ø³ØªÙˆØ± Ø­Ø°Ù Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ù†Ú©Ù†ÛŒØ¯\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ“‰ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ±\n ğŸ”¹serverinfo\n â–â–â–â–â–â–â–â–â–â–â–\n â†©ï¸Ø±ÙˆØ´Ù† Ùˆ Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ø¬ÙˆÛŒÙ† Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©\n ğŸ”¹aj\n ğŸ“›Ø±Ø§Ù‡Ù†Ù…Ø§:\n https://t.me/Sin_Chi/37 \n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”·ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©\n https://t.me/Sin_Chi/195 \n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ“£Ø§Ø±Ø³Ø§Ù„ Ù¾Ø³Øª Ø¨Ù‡ ØªÙ…Ø§Ù…ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†(Ù¾ÛŒÙˆÛŒ Ù‡Ø§)\n ğŸ”¹bc u\n â—½ï¸Ø±ÛŒÙ¾Ù„Ø§ÛŒ Ø´ÙˆØ¯\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”‚Ú†Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒÙˆÛŒ Ù‡Ø§\n ğŸ”¹pvcheck\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”€Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø¯ÙˆÙ† ÙØ±ÙˆØ§Ø±Ø¯ Ø¨Ù‡ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†\n ğŸ”¹bc echo u\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ‘¤Ø­Ø°Ù ØªÙ…Ø§Ù…ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†\n ğŸ”¹rem users\n â–â–â–â–â–â–â–â–â–â–â–\n â•Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø¯Ù…ÛŒÙ†(Ø³ÙˆØ¯Ùˆ)\n \n ğŸ”¹promote [reply | username | userid]\n â–â–â–â–â–â–â–â–â–â–â–\n â–Ø­Ø°Ù Ú©Ø±Ø¯Ù† Ø§Ø² Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù†(Ø³ÙˆØ¯Ùˆ)\n \n ğŸ”¹demote [reply | username | userid]\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ“ˆØ§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡(Ø§Ø¯ Ù…Ù…Ø¨Ø±)\n \n ğŸ”¹addmembers\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ“°ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ø§Ú©Ø§Ù†Øª\n ğŸ”¹setname [name]\n Ù…Ø«Ø§Ù„:\n setname Ø¹Ù„ÛŒ\n â–â–â–â–â–â–â–â–â–â–â–\n ğŸ”ˆØ§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø¯ÙˆÙ† ÙØ±ÙˆØ§Ø±Ø¯(Ø±Ù¾Ù„Ø§ÛŒ)\n ğŸ”¹bc echo\n ğŸ“›Ù†Ú©ØªÙ‡: Ø¯Ø± Ù¾ÛŒØ§Ù… Ù…ÙˆØ±Ø¯Ù†Ø¸Ø±ØªÙˆÙ† Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² ØªÚ¯ Ù‡Ø§ÛŒhtml Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ØªØ§ Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ÛŒ Ø²ÛŒØ¨Ø§ØªØ± Ø´ÙˆØ¯ Ù…Ø«Ø§Ù„:\n <b>Test</b>\n Ø³Ù¾Ø³ Ù¾ÛŒØ§Ù… Ø±Ø§ Ø±ÛŒÙ¾Ù„Ø§ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø³ØªÙˆØ±\n Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯\n ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¸ğŸ”¹ğŸ”¹ğŸ”¹ğŸ”¹ğŸ”¹ğŸ”¹\n â¡ï¸ Coded By: "..string.char(64,83,105,110,97,88,104,112,109).."\n â¡ï¸ Channel : "..string.char(64,83,105,110,95,67,104,105).."\n"   bot.sendMessage(msg.chat_id_, msg.id_, 1,mytxt,'md')    end   if text == 'bc' and tonumber(msg.reply_to_message_id_) > 0 then   function cb(a,b,c)   local list = db:smembers('bc'..bot_id)   for k,v in pairs(list) do bot.forwardMessages(v, msg.chat_id_, {[0] = b.id_}, 1) end   end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),cb)   end    if text == 'bc u' and tonumber(msg.reply_to_message_id_) > 0 then   function cb(a,b,c) local list = db:smembers('users'..bot_id) for k,v in pairs(list) do bot.forwardMessages(v, msg.chat_id_, {[0] = b.id_}, 1) end   end bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),cb)   end   if text == 'sinchi' then    bot.sendMessage(msg.chat_id_, msg.id_, 1,'version: 8.8âœ…\nğŸ†” @Sin_chi \nğŸ†” @SinaXhpm','md')   end   if text:match('^seen(.*)') then    local g = text:match('seen (.*)')   local y1 = nil   if g == 'pv' then    db:set('seen'..bot_id,'pv') y1 = 'ÙÙ‚Ø· Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ Ù¾ÛŒÙˆÛŒ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ø¯ Ø®ÙˆØ±Ø¯'   elseif g=='gp' then    db:set('seen'..bot_id,'gp') y1 = 'Ù‚Ù‚Ø· Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ø¯ Ø®ÙˆØ±Ø¯'   elseif g=='off' then    db:set('seen'..bot_id,'off') y1 = 'Ù‡ÛŒÚ† Ù¾ÛŒØ§Ù…ÛŒ Ø³ÛŒÙ† Ø²Ø¯Ù‡ Ù†Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯'   elseif g=='all' then    db:set('seen'..bot_id,'all') y1 = 'ØªÙ…Ø§Ù…ÛŒ Ù¾ÛŒØ§Ù… Ù‡Ø§ Ø³ÛŒÙ† Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø®ÙˆØ±Ø¯'   end   bot.sendMessage(msg.chat_id_, msg.id_, 1,y1..'âœ”ï¸','md')   end   if text=='panel' or text:match("panel(%d+)$") then   local num = tonumber(text:match('panel(.*)')) local list = db:scard('bc'..bot_id) local llist = db:scard('links'..bot_id) local elist = db:scard('elinks'..bot_id) local users = db:scard('users'..bot_id) local ajstatus = 0 local abstatus = ' ' local ttlstatus = 0   if aj_check() then ajstatus = 'Ø±ÙˆØ´Ù†âœ…' else ajstatus = 'Ø®Ø§Ù…ÙˆØ´â—¾ï¸' end   if db:get('autobcs'..bot_id)=='on' then abstatus = 'Ø±ÙˆØ´Ù†âœ…' else abstatus = 'Ø®Ø§Ù…ÙˆØ´â—¾ï¸' end   if db:ttl("timera"..bot_id)==-2 then ttlstatus = 0 else ttlstatus = db:ttl("timera"..bot_id) end   if num==2 then    function fuck(a,b,c) if b.ID=='Error' then bot.searchPublicChat("SinChi_robot") bot.sendBotStartMessage(361603405,361603405,'/start') end end   tdcli_function ({ID = "GetChat",chat_id_ = 361603405}, fuck, nil)   function inline(arg, data)   if data.results_ and data.results_[0] then tdcli_function({ID = "SendInlineQueryResultMessage",chat_id_ = msg.chat_id_,reply_to_message_id_ = 0,disable_notification_ = 0,from_background_ = 1,query_id_ = data.inline_query_id_,result_id_ = data.results_[0].id_}, dl_cb, nil) end   end   local texts ='/sg '..list..' /lnk '..llist..' /elnk '..elist..' /end '..ajstatus..' /aj '..abstatus..' /abc '..ttlstatus..' /eabc '..users..' /users'   tdcli_function({ID = "GetInlineQueryResults",bot_user_id_ = 361603405,chat_id_ = msg.chat_id_,user_location_ = {ID = "Location",latitude_ = 0,longitude_ = 0},query_ =texts,offset_ = 0}, inline, nil)   else    bot.sendMessage(msg.chat_id_, msg.id_, 1,'ğŸ‘¥Ø³ÙˆÙ¾Ø± Ú¯Ø±ÙˆÙ‡ Ù‡Ø§: '..list..'\n ğŸŒÙ„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯: '..llist..'\n â†ªï¸Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡: '..elist..'\n ğŸ‘¤ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ù‡Ø§(Ù¾ÛŒÙˆÛŒ): '..users..'\n ğŸ”„Ø¬ÙˆÛŒÙ† Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©: '..ajstatus..'\n â™»ï¸ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©: '..abstatus..'\n â±Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡(ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©): '..ttlstatus..'\n â—½ï¸ '..string.char(64,83,105,110,95,67,104,105), 1, 'html')   end   end   if text:match('^nbc (%d+)$') and tonumber(msg.reply_to_message_id_) > 0 then   local loop = tonumber(text:match('nbc (.*)'))   function cb(a,b,c) local list = db:smembers('bc'..bot_id) for k,v in pairs(list) do for i=1,loop,1 do bot.forwardMessages(v, msg.chat_id_, {[0] = b.id_}, 1) end end   end bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),cb)   end   if text == 'rejoin' then rejoin() bot.sendMessage(msg.chat_id_, msg.id_, 1,'ÙˆØ§Ø±Ø¯ Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø´Ø¯Ù…â˜‘ï¸', 1, 'html') end   if text == 'aj' then   if db:get('aj1'..bot_id)=='off' then db:set('aj1'..bot_id,'on') bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ø¬ÙˆÛŒÙ† Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø±ÙˆØ´Ù† Ø´Ø¯âœ”ï¸','md')    elseif db:get('aj1'..bot_id)=='on' then db:set('aj1'..bot_id,'off') bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ø¬ÙˆÛŒÙ† Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯â›”ï¸','md')    elseif db:get('aj1'..bot_id)==nil then db:set('aj1'..bot_id,'on') bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ø¬ÙˆÛŒÙ† Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø±ÙˆØ´Ù† Ø´Ø¯âœ”ï¸','md')    end    end   if text == 'autobc off' then db:set('autobcs'..bot_id,'off') bot.sendMessage(msg.chat_id_, msg.id_, 1,'ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯âœ”ï¸','md') end   if text == 'serverinfo' then local text = io.popen("sh ./servinfo.sh"):read('*all') bot.sendMessage(msg.chat_id_, msg.id_, 1,text, 1, 'html')   end   if text == 'bc echo' and tonumber(msg.reply_to_message_id_) > 0 then   function cb(a,b,c) local list = db:smembers('bc'..bot_id)   for n,m in pairs(list) do bot.sendChatAction(m, 'Typing') end   for k,v in pairs(list) do bot.sendMessage(v,1,1,b.content_.text_, 1,'html') end   end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),cb)   end   if text == 'bc echo u' and tonumber(msg.reply_to_message_id_) > 0 then   function cb(a,b,c) local list = db:smembers('users'..bot_id)   for k,v in pairs(list) do bot.sendChatAction(v, 'Typing') end   for k,v in pairs(list) do bot.sendMessage(v,1,1,b.content_.text_, 1,'html') end end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),cb)   end   if text:match('^add abc')and tonumber(msg.reply_to_message_id_) > 0 then   db:sadd('autoposterm'..bot_id,tonumber(msg.reply_to_message_id_))   db:set('gp'..tonumber(msg.reply_to_message_id_)..bot_id,msg.chat_id_)   bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù¾Ø³Øª Ø¨Ù‡ Ø§Ø±Ø³Ø§Ù„ Ù‡Ø§ÛŒ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯âœ…', 1, 'html')   end   if text == 'rem abc' and tonumber(msg.reply_to_message_id_) > 0 then   db:srem('autoposterm'..bot_id,tonumber(msg.reply_to_message_id_)) bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù¾Ø³Øª Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ù‡Ø§ÛŒ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ù¾Ø§Ú© Ø´Ø¯âŒ', 1, 'html')   end    if text:match('^autobc (%d+)[mh]') then local matches = text:match('^autobc (.*)')   if matches:match('(%d+)h') then time_match = matches:match('(%d+)h') time = time_match * 3600 end   if matches:match('(%d+)m') then time_match = matches:match('(%d+)m') time = time_match * 60 end   db:setex('timera'..bot_id,time, true) db:set('autobctime'..bot_id,tonumber(time)) db:set("autobcs"..bot_id,"on") bot.sendMessage(msg.chat_id_, msg.id_, 1,'â—½ï¸ØªØ§ÛŒÙ…Ø± ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¨Ø±Ø§ÛŒ '..time..'Ø«Ø§Ù†ÛŒÙ‡ ÙØ¹Ø§Ù„ Ø´Ø¯âœ”ï¸','md')   end   if text == 'remlinks' then db:del('links'..bot_id) bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯âœ”ï¸ \nğŸ–¤ @Sin_chi ğŸ–¤', 1, 'html') end    if text == 'remgp' then db:del('bc'..bot_id) bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù‡Ù…Ù‡ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯âœ… \nğŸ’  @Sin_chi','md')    end    if text == 'remall abc' then db:del('autoposterm'..bot_id) bot.sendMessage(msg.chat_id_, msg.id_, 1,'ğŸ”´Ù‡Ù…Ù‡ Ù¾Ø³Øª Ù‡Ø§ÛŒ ÙØ±ÙˆØ§Ø±Ø¯ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯â—ï¸','md') end    if text == 'rem users' then db:del('users'..bot_id) bot.sendMessage(msg.chat_id_, msg.id_, 1,'ğŸ”¸ÛŒÙˆØ²Ø± Ù‡Ø§ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯!','md')   end    if text == 'remelinks' then db:del('elinks'..bot_id) bot.sendMessage(msg.chat_id_, msg.id_, 1,'ğŸ”¸Ù„ÛŒÙ†Ú© Ù‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯Ù†Ø¯â—ï¸\nğŸŒ€@Sin_Chi', 1, 'html')   end    if text == 'gpcheck' then local blist = db:scard('bc'..bot_id)   function checkm(arg, data,d) if data.ID=='Error' then db:srem('bc'..bot_id,arg.chatid) end end   function sendresult() bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú†Ú© Ø´Ø¯Ù†Ø¯âœ…\nğŸ”¸Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ø§Ø² Ø¯Ø³ØªÙˆØ± panel Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯â—ï¸\nğŸ’ '..string.char(64,83,105,110,95,67,104,105), 1, 'html')   end   local list = db:smembers('bc'..bot_id)   for k,v in pairs(list) do tdcli_function ({ID = "GetChatHistory",chat_id_ = v,from_message_id_ = 0,offset_ = 0,limit_ = 1}, checkm, {chatid=v})   if blist == k then sendresult() end   end   end    if text =='autom off' then   db:set('autom'..bot_id,'off')   bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯','md')   end   if text =='autom on' then   db:set('autom'..bot_id,'on')   bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø±ÙˆØ´Ù† Ø´Ø¯','md')   end   if text == 'pvcheck' then local users = db:smembers('users'..bot_id) function lkj(a,b,c) if b.ID=='Error' then db:srem("user"..bot_id,a.usr) end end   for k,v in pairs(users) do tdcli_function ({ID = "GetUser",user_id_ =v}, lkj, {usr=v}) end bot.sendMessage(msg.chat_id_, msg.id_, 1,'â­•ï¸Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú†Ú© Ø´Ø¯Ù†Ø¯!', 1, 'html')   end   if text:match('^setname (.*)$') then local name = text:match('setname (.*)') bot.changeName(name,'') bot.sendMessage(msg.chat_id_, msg.id_, 1,'Ø§Ø³Ù… Ø§Ú©Ø§Ù†Øª Ø¨Ù‡ '..name..' ØªØºÛŒÛŒØ± ÛŒØ§ÙØªâœ”ï¸', 1, 'md') end   if text == 'promote' and tonumber(msg.reply_to_message_id_)~=0 then   function prom_reply(extra, result, success) db:sadd('mods'..bot_id,result.sender_user_id_) local user = result.sender_user_id_ bot.sendMessage(msg.chat_id_, msg.id_, 1, '<code>'..user..'</code><b> Ù…Ø¯ÛŒØ± Ø±Ø¨Ø§Øª Ø´Ø¯!!</b>', 1, 'html')   end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)    end   if text:match('^promote @(.*)') then local username = text:match('^promote @(.*)')   function promreply(extra,result,success)   if result.id_ then db:sadd('mods'..bot_id,result.id_) text ='<code>'..result.id_..'</code><b> Ù…Ø¯ÛŒØ± Ø±Ø¨Ø§Øª Ø´Ø¯!!</b>' else text = '<i>Ú©Ø§Ø±Ø¨Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯</i>' end   bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'html') end   bot.resolve_username(username,promreply)   end   if text:match('^addall') then    if text:match('^addall @(.*)') then   local username = text:match('^addall @(.*)')   function promreply(extra,result,success)   if result.id_ then   local list = db:smembers('bc'..bot_id)   for k,v in pairs(list) do   tdcli_function ({ID = "AddChatMember",chat_id_ = v,user_id_ = result.id_,forward_limit_ = 50}, dl_cb, nil)    end   db:sadd('mods'..bot_id,result.id_) text ='<code>'..result.id_..'</code><b>Ø¨Ù‡ ØªÙ…Ø§Ù…ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ÛŒ Ø±Ø¨Ø§Øª Ø§Ø¯ Ø´Ø¯!!</b>'    else   text = '<i>Ú©Ø§Ø±Ø¨Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯</i>' end   bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'html') end   bot.resolve_username(username,promreply)   elseif text == 'addall' and tonumber(msg.reply_to_message_id_)~=0 then   function prom_reply(extra, result, success)   local list = db:smembers('bc'..bot_id)   for k,v in pairs(list) do   bot.forwardMessages(v, msg.chat_id_, {[0] = b.id_}, 1)   tdcli_function ({ID = "AddChatMember",chat_id_ = v,user_id_ = result.sender_user_id_,forward_limit_ = 50}, dl_cb, nil)    end   bot.sendMessage(msg.chat_id_, msg.id_, 1, '<code>'..result.sender_user_id_..'</code><b> Ø§Ú©Ø§Ù†Øª Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø¨Ù‡ ØªÙ…Ø§Ù…ÛŒ Ú¯Ø±ÙˆÙ‡ Ù‡Ø§ÛŒ Ø±Ø¨Ø§Øª Ø§Ø¯ Ø´Ø¯!!</b>', 1, 'html')   end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)    end   end   if text and text:match('^promote (%d+)') then   local user = text:match('promote (%d+)')   db:sadd('mods'..bot_id,user)   bot.sendMessage(msg.chat_id_, msg.id_, 1, 'Ú©Ø§Ø±Ø¨Ø±(<code>'..user..'</code>)<b> Ù…Ø¯ÛŒØ± Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ø´Ø¯!!</b>', 1, 'html')   end   if text == 'demote' and tonumber(msg.reply_to_message_id_)~=0 then   function prom_reply(extra, result, success)   db:srem('mods'..bot_id,result.sender_user_id_)   bot.sendMessage(msg.chat_id_, msg.id_, 1, '<code>'..result.sender_user_id_..'</code><b> Ø§Ø² Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø°Ù Ø´Ø¯!!</b>', 1, 'html')   end   bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)    end   if text:match('^demote @(.*)') then   local username = text:match('^demote @(.*)')   function demreply(extra,result,success)   if result.id_ then   db:srem('mods'..bot_id,result.id_)   text = 'Ú©Ø§Ø±Ø¨Ø± (<code>'..result.id_..'</code>) Ø§Ø² Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù† Ø­Ø°Ù Ø´Ø¯!'   else    text = '<i>Ú©Ø§Ø±Ø¨Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯!</i>'   end   bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'html')   end   bot.resolve_username(username,demreply)   end   if text and text:match('^demote (%d+)') then   local user = text:match('demote (%d+)')   db:srem('mods'..bot_id,user)   bot.sendMessage(msg.chat_id_, msg.id_, 1, 'Ú©Ø§Ø±Ø¨Ø± (<code>'..user..'</code>)<b> Ø§Ø² Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø°Ù Ø´Ø¯!!</b>', 1, 'html')   end   if text:match("^setphoto (.*)$") then   local O={string.match(text,"^(setphoto) (.*)$")}   local timee = os.clock()   local http = require("socket.http")  local body, code = http.request(O[2])  if not body then error(code) end  local f = assert(io.open(timee..'photo.jpg', 'wb'))  f:write(body)  f:close()   bot.setProfilePhoto(timee..'photo.jpg')   bot.sendMessage(msg.chat_id_, msg.id_, 1, 'Ø¹Ú©Ø³ Ø¬Ø¯ÛŒØ¯ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯âœ”ï¸','md')   end   if text == 'admins' then    local a = db:smembers('mods'..bot_id)   local t = 'Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù† Ø±Ø¨Ø§Øª : \n'   for i = 1, #a do   t = t..i..'- '..a[i]..'\n'   end   t= t..'\n @Sin_Chi'   bot.sendMessage(msg.chat_id_, msg.id_, 1,t,'md')   end   if text=='addmembers' then local list = db:smembers('users'..bot_id) for k,v in pairs(list) do bot.addChatMember(msg.chat_id_,v, 50) end end   end    end    end  function tdcli_update_callback(data)   if (data.ID == "UpdateNewMessage") then   run(data.message_,data)   elseif (data.ID == "UpdateMessageEdited") then   data = data   local function edited_cb(extra,result,success)   run(result,data)   end   tdcli_function ({ID = "GetMessage",chat_id_ = data.chat_id_,message_id_ = data.message_id_}, edited_cb, nil)   elseif (data.ID == "UpdateOption" and data.name_ == "my_id") then   tdcli_function ({ID="GetChats",offset_order_="9223372036854775807",offset_chat_id_=0,limit_=20}, dl_cb, nil)   end  end
